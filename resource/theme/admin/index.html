{{define "admin/index"}}
{{template "admin/header" .}}

<div class="stats-grid">
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.articleNum}}</h2>
        <p class="stat-card-label">{{.Tr.T "articles"}}</p>
        <i class="fa fa-newspaper-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.lastArticlePublish}}</h2>
        <p class="stat-card-label">{{.Tr.T "days_left_from_the_last_post"}}</p>
        <i class="fa fa-clock-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.commentNum}}</h2>
        <p class="stat-card-label">{{.Tr.T "comments"}}</p>
        <i class="fa fa-comments-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.lastComment}}</h2>
        <p class="stat-card-label">{{.Tr.T "days_left_from_the_last_comment"}}</p>
        <i class="fa fa-clock-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.tagNum}}</h2>
        <p class="stat-card-label">{{.Tr.T "labels"}}</p>
        <i class="fa fa-tags stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.memoryUsage}}M</h2>
        <p class="stat-card-label">{{.Tr.T "memory_usage"}}</p>
        <i class="fa fa-file-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.gcNum}}</h2>
        <p class="stat-card-label">{{.Tr.T "gc_num"}}</p>
        <i class="fa fa-trash-o stat-card-icon"></i>
    </div>
    <div class="stat-card">
        <h2 class="stat-card-value">{{.Data.routineNum}}</h2>
        <p class="stat-card-label">{{.Tr.T "routine_num"}}</p>
        <i class="fa fa-meh-o stat-card-icon"></i>
    </div>
</div>

<div class="admin-card">
    <div class="admin-card-header">
        System Actions
    </div>
    <div class="admin-card-body">
        <button onclick="rebuildFullTextSearch()" class="btn btn-danger">
            <i class="fa fa-refresh"></i> {{.Tr.T "rebuild_fulltext_search_data"}}
        </button>
    </div>
</div>

<script>
    function rebuildFullTextSearch() {
        if (confirm('Rebuild full-text search data?')) {
            ajaxRequest({
                url: "/admin/rebuild-full-text-search",
                type: 'GET',
                success: () => {
                    alert("Rebuild successful")
                }
            })
        }
    }
</script>

{{template "admin/footer" .}}
{{end}}